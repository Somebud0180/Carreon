[gd_scene format=3 uid="uid://cp7h1mjj7uvor"]

[ext_resource type="Script" uid="uid://bdns35x6txqxe" path="res://scripts/gaff.gd" id="1_swv0j"]
[ext_resource type="Texture2D" uid="uid://drsfwxcetctrr" path="res://textures/game/gaff_sheet.png" id="2_3hfui"]

[sub_resource type="AtlasTexture" id="AtlasTexture_gqgjn"]
atlas = ExtResource("2_3hfui")
region = Rect2(384, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_mg6de"]
atlas = ExtResource("2_3hfui")
region = Rect2(0, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_rrqcl"]
atlas = ExtResource("2_3hfui")
region = Rect2(128, 0, 128, 128)

[sub_resource type="AtlasTexture" id="AtlasTexture_2yilv"]
atlas = ExtResource("2_3hfui")
region = Rect2(256, 0, 128, 128)

[sub_resource type="SpriteFrames" id="SpriteFrames_ev80e"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_gqgjn")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mg6de")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rrqcl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2yilv")
}],
"loop": true,
"name": &"walk",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nolhe"]
size = Vector2(94, 110)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_swv0j"]
polygon = PackedVector2Array(48, -32, 48, -3, 37, 9, 33, 25, 52.000008, 46.62802, 52, 63, -46, 63, -46, -15, -53, -23, -53, -42, -43, -55, -28, -55, -28, -46, -35, -36, -35, -30, -28, -19, -28, -7, 8, -7, 8, -34, 14, -34, 22, -24, 36, -24, 43, -32)

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_swv0j"]
particle_flag_disable_z = true
emission_shape = 1
emission_sphere_radius = 1.0
angle_min = -360.0
angle_max = 360.00003
spread = 180.0
initial_velocity_min = 200.0
initial_velocity_max = 200.0
gravity = Vector3(0, 0, 0)
linear_accel_min = 99.99999
linear_accel_max = 99.99999
radial_accel_min = -80.0
radial_accel_max = 280.0
scale_max = 4.0
color = Color(0.8981856, 0.90234375, 0.37010193, 0.8117647)
turbulence_noise_scale = 1.0
turbulence_noise_speed = Vector3(1, 1, 0)
turbulence_influence_min = 0.010000001
turbulence_influence_max = 0.010000001
turbulence_initial_displacement_min = 100.0
turbulence_initial_displacement_max = 100.0

[node name="Gaff" type="CharacterBody2D" unique_id=2106696707]
script = ExtResource("1_swv0j")

[node name="ChargeBar" type="ProgressBar" parent="." unique_id=1092305421]
z_index = 1
anchors_preset = 10
anchor_right = 1.0
offset_left = -64.0
offset_top = -96.0
offset_right = 64.0
offset_bottom = -69.0
grow_horizontal = 2
max_value = 50.0
show_percentage = false

[node name="Label" type="Label" parent="." unique_id=1753553537]
z_index = 1
offset_left = 47.0
offset_top = -72.0
offset_right = 183.0
offset_bottom = -27.0
theme_override_font_sizes/font_size = 32
text = "Standing"

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="." unique_id=117842749]
sprite_frames = SubResource("SpriteFrames_ev80e")
animation = &"walk"
autoplay = "default"

[node name="CollisionShape2D" type="CollisionShape2D" parent="." unique_id=1207986143]
position = Vector2(0, 6)
shape = SubResource("RectangleShape2D_nolhe")

[node name="Camera2D" type="Camera2D" parent="." unique_id=1094915614]
offset = Vector2(0, -96)
zoom = Vector2(1.5, 1.5)
position_smoothing_enabled = true
drag_vertical_enabled = true
drag_top_margin = 0.5

[node name="CoyoteTimer" type="Timer" parent="." unique_id=1877702300]

[node name="ChargedTimer" type="Timer" parent="." unique_id=12552418]

[node name="LightOccluder2D" type="LightOccluder2D" parent="." unique_id=1131603491]
occluder = SubResource("OccluderPolygon2D_swv0j")

[node name="ChargeEmitter" type="GPUParticles2D" parent="." unique_id=32657040]
amount = 4
lifetime = 0.3
randomness = 0.25
trail_enabled = true
trail_lifetime = 0.2
trail_sections = 2
trail_section_subdivisions = 1
process_material = SubResource("ParticleProcessMaterial_swv0j")

[connection signal="timeout" from="CoyoteTimer" to="." method="_on_coyote_timer_timeout"]
[connection signal="timeout" from="ChargedTimer" to="." method="_on_charged_timer_timeout"]
